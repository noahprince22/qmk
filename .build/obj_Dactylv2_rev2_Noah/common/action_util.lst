   1               		.file	"action_util.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               		.section	.text.add_key,"ax",@progbits
  11               	.global	add_key
  13               	add_key:
  14               	.LFB0:
  15               		.file 1 "./tmk_core/common/action_util.h"
   1:./tmk_core/common/action_util.h **** /*
   2:./tmk_core/common/action_util.h **** Copyright 2013 Jun Wako <wakojun@gmail.com>
   3:./tmk_core/common/action_util.h **** 
   4:./tmk_core/common/action_util.h **** This program is free software: you can redistribute it and/or modify
   5:./tmk_core/common/action_util.h **** it under the terms of the GNU General Public License as published by
   6:./tmk_core/common/action_util.h **** the Free Software Foundation, either version 2 of the License, or
   7:./tmk_core/common/action_util.h **** (at your option) any later version.
   8:./tmk_core/common/action_util.h **** 
   9:./tmk_core/common/action_util.h **** This program is distributed in the hope that it will be useful,
  10:./tmk_core/common/action_util.h **** but WITHOUT ANY WARRANTY; without even the implied warranty of
  11:./tmk_core/common/action_util.h **** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  12:./tmk_core/common/action_util.h **** GNU General Public License for more details.
  13:./tmk_core/common/action_util.h **** 
  14:./tmk_core/common/action_util.h **** You should have received a copy of the GNU General Public License
  15:./tmk_core/common/action_util.h **** along with this program.  If not, see <http://www.gnu.org/licenses/>.
  16:./tmk_core/common/action_util.h **** */
  17:./tmk_core/common/action_util.h **** #ifndef ACTION_UTIL_H
  18:./tmk_core/common/action_util.h **** #define ACTION_UTIL_H
  19:./tmk_core/common/action_util.h **** 
  20:./tmk_core/common/action_util.h **** #include <stdint.h>
  21:./tmk_core/common/action_util.h **** #include "report.h"
  22:./tmk_core/common/action_util.h **** 
  23:./tmk_core/common/action_util.h **** #ifdef __cplusplus
  24:./tmk_core/common/action_util.h **** extern "C" {
  25:./tmk_core/common/action_util.h **** #endif
  26:./tmk_core/common/action_util.h **** 
  27:./tmk_core/common/action_util.h **** extern report_keyboard_t *keyboard_report;
  28:./tmk_core/common/action_util.h **** 
  29:./tmk_core/common/action_util.h **** void send_keyboard_report(void);
  30:./tmk_core/common/action_util.h **** 
  31:./tmk_core/common/action_util.h **** /* key */
  32:./tmk_core/common/action_util.h **** inline void add_key(uint8_t key) {
  16               		.loc 1 32 0
  17               		.cfi_startproc
  18               	.LVL0:
  19               	/* prologue: function */
  20               	/* frame size = 0 */
  21               	/* stack size = 0 */
  22               	.L__stack_usage = 0
  33:./tmk_core/common/action_util.h ****   add_key_to_report(keyboard_report, key);
  23               		.loc 1 33 0
  24 0000 682F      		mov r22,r24
  25 0002 8091 0000 		lds r24,keyboard_report
  26 0006 9091 0000 		lds r25,keyboard_report+1
  27               	.LVL1:
  28 000a 0C94 0000 		jmp add_key_to_report
  29               	.LVL2:
  30               		.cfi_endproc
  31               	.LFE0:
  33               		.section	.text.del_key,"ax",@progbits
  34               	.global	del_key
  36               	del_key:
  37               	.LFB1:
  34:./tmk_core/common/action_util.h **** }
  35:./tmk_core/common/action_util.h **** 
  36:./tmk_core/common/action_util.h **** inline void del_key(uint8_t key) {
  38               		.loc 1 36 0
  39               		.cfi_startproc
  40               	.LVL3:
  41               	/* prologue: function */
  42               	/* frame size = 0 */
  43               	/* stack size = 0 */
  44               	.L__stack_usage = 0
  37:./tmk_core/common/action_util.h ****   del_key_from_report(keyboard_report, key);
  45               		.loc 1 37 0
  46 0000 682F      		mov r22,r24
  47 0002 8091 0000 		lds r24,keyboard_report
  48 0006 9091 0000 		lds r25,keyboard_report+1
  49               	.LVL4:
  50 000a 0C94 0000 		jmp del_key_from_report
  51               	.LVL5:
  52               		.cfi_endproc
  53               	.LFE1:
  55               		.section	.text.clear_keys,"ax",@progbits
  56               	.global	clear_keys
  58               	clear_keys:
  59               	.LFB2:
  38:./tmk_core/common/action_util.h **** }
  39:./tmk_core/common/action_util.h **** 
  40:./tmk_core/common/action_util.h **** inline void clear_keys(void) {
  60               		.loc 1 40 0
  61               		.cfi_startproc
  62               	/* prologue: function */
  63               	/* frame size = 0 */
  64               	/* stack size = 0 */
  65               	.L__stack_usage = 0
  41:./tmk_core/common/action_util.h ****   clear_keys_from_report(keyboard_report);
  66               		.loc 1 41 0
  67 0000 8091 0000 		lds r24,keyboard_report
  68 0004 9091 0000 		lds r25,keyboard_report+1
  69 0008 0C94 0000 		jmp clear_keys_from_report
  70               	.LVL6:
  71               		.cfi_endproc
  72               	.LFE2:
  74               		.section	.text.get_oneshot_locked_mods,"ax",@progbits
  75               	.global	get_oneshot_locked_mods
  77               	get_oneshot_locked_mods:
  78               	.LFB7:
  79               		.file 2 "./tmk_core/common/action_util.c"
   1:./tmk_core/common/action_util.c **** /*
   2:./tmk_core/common/action_util.c **** Copyright 2013 Jun Wako <wakojun@gmail.com>
   3:./tmk_core/common/action_util.c **** 
   4:./tmk_core/common/action_util.c **** This program is free software: you can redistribute it and/or modify
   5:./tmk_core/common/action_util.c **** it under the terms of the GNU General Public License as published by
   6:./tmk_core/common/action_util.c **** the Free Software Foundation, either version 2 of the License, or
   7:./tmk_core/common/action_util.c **** (at your option) any later version.
   8:./tmk_core/common/action_util.c **** 
   9:./tmk_core/common/action_util.c **** This program is distributed in the hope that it will be useful,
  10:./tmk_core/common/action_util.c **** but WITHOUT ANY WARRANTY; without even the implied warranty of
  11:./tmk_core/common/action_util.c **** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  12:./tmk_core/common/action_util.c **** GNU General Public License for more details.
  13:./tmk_core/common/action_util.c **** 
  14:./tmk_core/common/action_util.c **** You should have received a copy of the GNU General Public License
  15:./tmk_core/common/action_util.c **** along with this program.  If not, see <http://www.gnu.org/licenses/>.
  16:./tmk_core/common/action_util.c **** */
  17:./tmk_core/common/action_util.c **** #include "host.h"
  18:./tmk_core/common/action_util.c **** #include "report.h"
  19:./tmk_core/common/action_util.c **** #include "debug.h"
  20:./tmk_core/common/action_util.c **** #include "action_util.h"
  21:./tmk_core/common/action_util.c **** #include "action_layer.h"
  22:./tmk_core/common/action_util.c **** #include "timer.h"
  23:./tmk_core/common/action_util.c **** #include "keycode_config.h"
  24:./tmk_core/common/action_util.c **** 
  25:./tmk_core/common/action_util.c **** extern keymap_config_t keymap_config;
  26:./tmk_core/common/action_util.c **** 
  27:./tmk_core/common/action_util.c **** 
  28:./tmk_core/common/action_util.c **** static uint8_t real_mods = 0;
  29:./tmk_core/common/action_util.c **** static uint8_t weak_mods = 0;
  30:./tmk_core/common/action_util.c **** static uint8_t macro_mods = 0;
  31:./tmk_core/common/action_util.c **** 
  32:./tmk_core/common/action_util.c **** #ifdef USB_6KRO_ENABLE
  33:./tmk_core/common/action_util.c **** #define RO_ADD(a, b) ((a + b) % KEYBOARD_REPORT_KEYS)
  34:./tmk_core/common/action_util.c **** #define RO_SUB(a, b) ((a - b + KEYBOARD_REPORT_KEYS) % KEYBOARD_REPORT_KEYS)
  35:./tmk_core/common/action_util.c **** #define RO_INC(a) RO_ADD(a, 1)
  36:./tmk_core/common/action_util.c **** #define RO_DEC(a) RO_SUB(a, 1)
  37:./tmk_core/common/action_util.c **** static int8_t cb_head = 0;
  38:./tmk_core/common/action_util.c **** static int8_t cb_tail = 0;
  39:./tmk_core/common/action_util.c **** static int8_t cb_count = 0;
  40:./tmk_core/common/action_util.c **** #endif
  41:./tmk_core/common/action_util.c **** 
  42:./tmk_core/common/action_util.c **** // TODO: pointer variable is not needed
  43:./tmk_core/common/action_util.c **** //report_keyboard_t keyboard_report = {};
  44:./tmk_core/common/action_util.c **** report_keyboard_t *keyboard_report = &(report_keyboard_t){};
  45:./tmk_core/common/action_util.c **** 
  46:./tmk_core/common/action_util.c **** extern inline void add_key(uint8_t key);
  47:./tmk_core/common/action_util.c **** extern inline void del_key(uint8_t key);
  48:./tmk_core/common/action_util.c **** extern inline void clear_keys(void);
  49:./tmk_core/common/action_util.c **** 
  50:./tmk_core/common/action_util.c **** #ifndef NO_ACTION_ONESHOT
  51:./tmk_core/common/action_util.c **** static int8_t oneshot_mods = 0;
  52:./tmk_core/common/action_util.c **** static int8_t oneshot_locked_mods = 0;
  53:./tmk_core/common/action_util.c **** int8_t get_oneshot_locked_mods(void) { return oneshot_locked_mods; }
  80               		.loc 2 53 0
  81               		.cfi_startproc
  82               	/* prologue: function */
  83               	/* frame size = 0 */
  84               	/* stack size = 0 */
  85               	.L__stack_usage = 0
  86               		.loc 2 53 0
  87 0000 8091 0000 		lds r24,oneshot_locked_mods
  88 0004 0895      		ret
  89               		.cfi_endproc
  90               	.LFE7:
  92               		.section	.text.set_oneshot_locked_mods,"ax",@progbits
  93               	.global	set_oneshot_locked_mods
  95               	set_oneshot_locked_mods:
  96               	.LFB8:
  54:./tmk_core/common/action_util.c **** void set_oneshot_locked_mods(int8_t mods) { oneshot_locked_mods = mods; }
  97               		.loc 2 54 0
  98               		.cfi_startproc
  99               	.LVL7:
 100               	/* prologue: function */
 101               	/* frame size = 0 */
 102               	/* stack size = 0 */
 103               	.L__stack_usage = 0
 104               		.loc 2 54 0
 105 0000 8093 0000 		sts oneshot_locked_mods,r24
 106 0004 0895      		ret
 107               		.cfi_endproc
 108               	.LFE8:
 110               		.section	.text.clear_oneshot_locked_mods,"ax",@progbits
 111               	.global	clear_oneshot_locked_mods
 113               	clear_oneshot_locked_mods:
 114               	.LFB9:
  55:./tmk_core/common/action_util.c **** void clear_oneshot_locked_mods(void) { oneshot_locked_mods = 0; }
 115               		.loc 2 55 0
 116               		.cfi_startproc
 117               	/* prologue: function */
 118               	/* frame size = 0 */
 119               	/* stack size = 0 */
 120               	.L__stack_usage = 0
 121               		.loc 2 55 0
 122 0000 1092 0000 		sts oneshot_locked_mods,__zero_reg__
 123 0004 0895      		ret
 124               		.cfi_endproc
 125               	.LFE9:
 127               		.section	.text.has_oneshot_mods_timed_out,"ax",@progbits
 128               	.global	has_oneshot_mods_timed_out
 130               	has_oneshot_mods_timed_out:
 131               	.LFB10:
  56:./tmk_core/common/action_util.c **** #if (defined(ONESHOT_TIMEOUT) && (ONESHOT_TIMEOUT > 0))
  57:./tmk_core/common/action_util.c **** static int16_t oneshot_time = 0;
  58:./tmk_core/common/action_util.c **** bool has_oneshot_mods_timed_out(void) {
  59:./tmk_core/common/action_util.c ****   return TIMER_DIFF_16(timer_read(), oneshot_time) >= ONESHOT_TIMEOUT;
  60:./tmk_core/common/action_util.c **** }
  61:./tmk_core/common/action_util.c **** #else
  62:./tmk_core/common/action_util.c **** bool has_oneshot_mods_timed_out(void) {
 132               		.loc 2 62 0
 133               		.cfi_startproc
 134               	/* prologue: function */
 135               	/* frame size = 0 */
 136               	/* stack size = 0 */
 137               	.L__stack_usage = 0
  63:./tmk_core/common/action_util.c ****     return false;
  64:./tmk_core/common/action_util.c **** }
 138               		.loc 2 64 0
 139 0000 80E0      		ldi r24,0
 140 0002 0895      		ret
 141               		.cfi_endproc
 142               	.LFE10:
 144               		.section	.text.get_oneshot_layer,"ax",@progbits
 145               	.global	get_oneshot_layer
 147               	get_oneshot_layer:
 148               	.LFB11:
  65:./tmk_core/common/action_util.c **** #endif
  66:./tmk_core/common/action_util.c **** #endif
  67:./tmk_core/common/action_util.c **** 
  68:./tmk_core/common/action_util.c **** /* oneshot layer */
  69:./tmk_core/common/action_util.c **** #ifndef NO_ACTION_ONESHOT
  70:./tmk_core/common/action_util.c **** /** \brief oneshot_layer_data bits
  71:./tmk_core/common/action_util.c ****  * LLLL LSSS
  72:./tmk_core/common/action_util.c ****  * where:
  73:./tmk_core/common/action_util.c ****  *   L => are layer bits
  74:./tmk_core/common/action_util.c ****  *   S => oneshot state bits
  75:./tmk_core/common/action_util.c ****  */
  76:./tmk_core/common/action_util.c **** static int8_t oneshot_layer_data = 0;
  77:./tmk_core/common/action_util.c **** 
  78:./tmk_core/common/action_util.c **** inline uint8_t get_oneshot_layer(void) { return oneshot_layer_data >> 3; }
 149               		.loc 2 78 0
 150               		.cfi_startproc
 151               	/* prologue: function */
 152               	/* frame size = 0 */
 153               	/* stack size = 0 */
 154               	.L__stack_usage = 0
 155               		.loc 2 78 0
 156 0000 8091 0000 		lds r24,oneshot_layer_data
 157 0004 8595      		asr r24
 158 0006 8595      		asr r24
 159 0008 8595      		asr r24
 160 000a 0895      		ret
 161               		.cfi_endproc
 162               	.LFE11:
 164               		.section	.text.get_oneshot_layer_state,"ax",@progbits
 165               	.global	get_oneshot_layer_state
 167               	get_oneshot_layer_state:
 168               	.LFB12:
  79:./tmk_core/common/action_util.c **** inline uint8_t get_oneshot_layer_state(void) { return oneshot_layer_data & 0b111; }
 169               		.loc 2 79 0
 170               		.cfi_startproc
 171               	/* prologue: function */
 172               	/* frame size = 0 */
 173               	/* stack size = 0 */
 174               	.L__stack_usage = 0
 175               		.loc 2 79 0
 176 0000 8091 0000 		lds r24,oneshot_layer_data
 177 0004 8770      		andi r24,lo8(7)
 178 0006 0895      		ret
 179               		.cfi_endproc
 180               	.LFE12:
 182               		.section	.text.set_oneshot_layer,"ax",@progbits
 183               	.global	set_oneshot_layer
 185               	set_oneshot_layer:
 186               	.LFB13:
  80:./tmk_core/common/action_util.c **** 
  81:./tmk_core/common/action_util.c **** #if (defined(ONESHOT_TIMEOUT) && (ONESHOT_TIMEOUT > 0))
  82:./tmk_core/common/action_util.c **** static int16_t oneshot_layer_time = 0;
  83:./tmk_core/common/action_util.c **** inline bool has_oneshot_layer_timed_out() {
  84:./tmk_core/common/action_util.c ****     return TIMER_DIFF_16(timer_read(), oneshot_layer_time) >= ONESHOT_TIMEOUT &&
  85:./tmk_core/common/action_util.c ****         !(get_oneshot_layer_state() & ONESHOT_TOGGLED);
  86:./tmk_core/common/action_util.c **** }
  87:./tmk_core/common/action_util.c **** #endif
  88:./tmk_core/common/action_util.c **** 
  89:./tmk_core/common/action_util.c **** /** \brief Set oneshot layer 
  90:./tmk_core/common/action_util.c ****  *
  91:./tmk_core/common/action_util.c ****  * FIXME: needs doc
  92:./tmk_core/common/action_util.c ****  */
  93:./tmk_core/common/action_util.c **** void set_oneshot_layer(uint8_t layer, uint8_t state)
  94:./tmk_core/common/action_util.c **** {
 187               		.loc 2 94 0
 188               		.cfi_startproc
 189               	.LVL8:
 190               	/* prologue: function */
 191               	/* frame size = 0 */
 192               	/* stack size = 0 */
 193               	.L__stack_usage = 0
  95:./tmk_core/common/action_util.c ****     oneshot_layer_data = layer << 3 | state;
 194               		.loc 2 95 0
 195 0000 98E0      		ldi r25,lo8(8)
 196 0002 899F      		mul r24,r25
 197 0004 9001      		movw r18,r0
 198 0006 1124      		clr __zero_reg__
 199 0008 262B      		or r18,r22
 200 000a 2093 0000 		sts oneshot_layer_data,r18
  96:./tmk_core/common/action_util.c ****     layer_on(layer);
 201               		.loc 2 96 0
 202 000e 0C94 0000 		jmp layer_on
 203               	.LVL9:
 204               		.cfi_endproc
 205               	.LFE13:
 207               		.section	.text.reset_oneshot_layer,"ax",@progbits
 208               	.global	reset_oneshot_layer
 210               	reset_oneshot_layer:
 211               	.LFB14:
  97:./tmk_core/common/action_util.c **** #if (defined(ONESHOT_TIMEOUT) && (ONESHOT_TIMEOUT > 0))
  98:./tmk_core/common/action_util.c ****     oneshot_layer_time = timer_read();
  99:./tmk_core/common/action_util.c **** #endif
 100:./tmk_core/common/action_util.c **** }
 101:./tmk_core/common/action_util.c **** /** \brief Reset oneshot layer 
 102:./tmk_core/common/action_util.c ****  *
 103:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 104:./tmk_core/common/action_util.c ****  */
 105:./tmk_core/common/action_util.c **** void reset_oneshot_layer(void) {
 212               		.loc 2 105 0
 213               		.cfi_startproc
 214               	/* prologue: function */
 215               	/* frame size = 0 */
 216               	/* stack size = 0 */
 217               	.L__stack_usage = 0
 106:./tmk_core/common/action_util.c ****     oneshot_layer_data = 0;
 218               		.loc 2 106 0
 219 0000 1092 0000 		sts oneshot_layer_data,__zero_reg__
 220 0004 0895      		ret
 221               		.cfi_endproc
 222               	.LFE14:
 224               		.section	.text.clear_oneshot_layer_state,"ax",@progbits
 225               	.global	clear_oneshot_layer_state
 227               	clear_oneshot_layer_state:
 228               	.LFB15:
 107:./tmk_core/common/action_util.c **** #if (defined(ONESHOT_TIMEOUT) && (ONESHOT_TIMEOUT > 0))
 108:./tmk_core/common/action_util.c ****     oneshot_layer_time = 0;
 109:./tmk_core/common/action_util.c **** #endif
 110:./tmk_core/common/action_util.c **** }
 111:./tmk_core/common/action_util.c **** /** \brief Clear oneshot layer 
 112:./tmk_core/common/action_util.c ****  *
 113:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 114:./tmk_core/common/action_util.c ****  */
 115:./tmk_core/common/action_util.c **** void clear_oneshot_layer_state(oneshot_fullfillment_t state)
 116:./tmk_core/common/action_util.c **** {
 229               		.loc 2 116 0
 230               		.cfi_startproc
 231               	.LVL10:
 232               	/* prologue: function */
 233               	/* frame size = 0 */
 234               	/* stack size = 0 */
 235               	.L__stack_usage = 0
 117:./tmk_core/common/action_util.c ****     uint8_t start_state = oneshot_layer_data;
 236               		.loc 2 117 0
 237 0000 2091 0000 		lds r18,oneshot_layer_data
 238               	.LVL11:
 118:./tmk_core/common/action_util.c ****     oneshot_layer_data &= ~state;
 239               		.loc 2 118 0
 240 0004 8095      		com r24
 241               	.LVL12:
 242 0006 8223      		and r24,r18
 243               	.LVL13:
 244 0008 8093 0000 		sts oneshot_layer_data,r24
 119:./tmk_core/common/action_util.c ****     if (!get_oneshot_layer_state() && start_state != oneshot_layer_data) {
 245               		.loc 2 119 0
 246 000c 982F      		mov r25,r24
 247 000e 9770      		andi r25,lo8(7)
 248 0010 01F4      		brne .L12
 249               		.loc 2 119 0 is_stmt 0 discriminator 1
 250 0012 30E0      		ldi r19,0
 251 0014 482F      		mov r20,r24
 252 0016 082E      		mov __tmp_reg__,r24
 253 0018 000C      		lsl r0
 254 001a 550B      		sbc r21,r21
 255 001c 2417      		cp r18,r20
 256 001e 3507      		cpc r19,r21
 257 0020 01F0      		breq .L12
 120:./tmk_core/common/action_util.c ****         layer_off(get_oneshot_layer());
 258               		.loc 2 120 0 is_stmt 1
 259 0022 8595      		asr r24
 260 0024 8595      		asr r24
 261 0026 8595      		asr r24
 262 0028 0C94 0000 		jmp layer_off
 263               	.LVL14:
 264               	.L12:
 265 002c 0895      		ret
 266               		.cfi_endproc
 267               	.LFE15:
 269               		.section	.text.is_oneshot_layer_active,"ax",@progbits
 270               	.global	is_oneshot_layer_active
 272               	is_oneshot_layer_active:
 273               	.LFB16:
 121:./tmk_core/common/action_util.c **** #if (defined(ONESHOT_TIMEOUT) && (ONESHOT_TIMEOUT > 0))
 122:./tmk_core/common/action_util.c ****     oneshot_layer_time = 0;
 123:./tmk_core/common/action_util.c **** #endif
 124:./tmk_core/common/action_util.c ****     }
 125:./tmk_core/common/action_util.c **** }
 126:./tmk_core/common/action_util.c **** /** \brief Is oneshot layer active
 127:./tmk_core/common/action_util.c ****  *
 128:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 129:./tmk_core/common/action_util.c ****  */
 130:./tmk_core/common/action_util.c **** bool is_oneshot_layer_active(void)
 131:./tmk_core/common/action_util.c **** {
 274               		.loc 2 131 0
 275               		.cfi_startproc
 276               	/* prologue: function */
 277               	/* frame size = 0 */
 278               	/* stack size = 0 */
 279               	.L__stack_usage = 0
 132:./tmk_core/common/action_util.c ****     return get_oneshot_layer_state();
 280               		.loc 2 132 0
 281 0000 9091 0000 		lds r25,oneshot_layer_data
 282 0004 9770      		andi r25,lo8(7)
 283 0006 81E0      		ldi r24,lo8(1)
 284 0008 01F4      		brne .L16
 285 000a 80E0      		ldi r24,0
 286               	.L16:
 133:./tmk_core/common/action_util.c **** }
 287               		.loc 2 133 0
 288 000c 0895      		ret
 289               		.cfi_endproc
 290               	.LFE16:
 292               		.section	.text.send_keyboard_report,"ax",@progbits
 293               	.global	send_keyboard_report
 295               	send_keyboard_report:
 296               	.LFB17:
 134:./tmk_core/common/action_util.c **** #endif
 135:./tmk_core/common/action_util.c **** 
 136:./tmk_core/common/action_util.c **** /** \brief Send keyboard report
 137:./tmk_core/common/action_util.c ****  *
 138:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 139:./tmk_core/common/action_util.c ****  */
 140:./tmk_core/common/action_util.c **** void send_keyboard_report(void) {
 297               		.loc 2 140 0
 298               		.cfi_startproc
 299               	/* prologue: function */
 300               	/* frame size = 0 */
 301               	/* stack size = 0 */
 302               	.L__stack_usage = 0
 141:./tmk_core/common/action_util.c ****     keyboard_report->mods  = real_mods;
 303               		.loc 2 141 0
 304 0000 E091 0000 		lds r30,keyboard_report
 305 0004 F091 0000 		lds r31,keyboard_report+1
 306 0008 8091 0000 		lds r24,real_mods
 307 000c 8083      		st Z,r24
 142:./tmk_core/common/action_util.c ****     keyboard_report->mods |= weak_mods;
 308               		.loc 2 142 0
 309 000e E091 0000 		lds r30,keyboard_report
 310 0012 F091 0000 		lds r31,keyboard_report+1
 311 0016 9081      		ld r25,Z
 312 0018 8091 0000 		lds r24,weak_mods
 313 001c 892B      		or r24,r25
 314 001e 8083      		st Z,r24
 143:./tmk_core/common/action_util.c ****     keyboard_report->mods |= macro_mods;
 315               		.loc 2 143 0
 316 0020 E091 0000 		lds r30,keyboard_report
 317 0024 F091 0000 		lds r31,keyboard_report+1
 318 0028 9081      		ld r25,Z
 319 002a 8091 0000 		lds r24,macro_mods
 320 002e 892B      		or r24,r25
 321 0030 8083      		st Z,r24
 144:./tmk_core/common/action_util.c **** #ifndef NO_ACTION_ONESHOT
 145:./tmk_core/common/action_util.c ****     if (oneshot_mods) {
 322               		.loc 2 145 0
 323 0032 8091 0000 		lds r24,oneshot_mods
 324 0036 8823      		tst r24
 325 0038 01F0      		breq .L19
 146:./tmk_core/common/action_util.c **** #if (defined(ONESHOT_TIMEOUT) && (ONESHOT_TIMEOUT > 0))
 147:./tmk_core/common/action_util.c ****         if (has_oneshot_mods_timed_out()) {
 148:./tmk_core/common/action_util.c ****             dprintf("Oneshot: timeout\n");
 149:./tmk_core/common/action_util.c ****             clear_oneshot_mods();
 150:./tmk_core/common/action_util.c ****         }
 151:./tmk_core/common/action_util.c **** #endif
 152:./tmk_core/common/action_util.c ****         keyboard_report->mods |= oneshot_mods;
 326               		.loc 2 152 0
 327 003a E091 0000 		lds r30,keyboard_report
 328 003e F091 0000 		lds r31,keyboard_report+1
 329 0042 9081      		ld r25,Z
 330 0044 892B      		or r24,r25
 331 0046 8083      		st Z,r24
 153:./tmk_core/common/action_util.c ****         if (has_anykey(keyboard_report)) {
 332               		.loc 2 153 0
 333 0048 8091 0000 		lds r24,keyboard_report
 334 004c 9091 0000 		lds r25,keyboard_report+1
 335 0050 0E94 0000 		call has_anykey
 336               	.LVL15:
 337 0054 8111      		cpse r24,__zero_reg__
 338               	.LBB10:
 339               	.LBB11:
 154:./tmk_core/common/action_util.c ****             clear_oneshot_mods();
 155:./tmk_core/common/action_util.c ****         }
 156:./tmk_core/common/action_util.c ****     }
 157:./tmk_core/common/action_util.c **** 
 158:./tmk_core/common/action_util.c **** #endif
 159:./tmk_core/common/action_util.c ****     host_keyboard_send(keyboard_report);
 160:./tmk_core/common/action_util.c **** }
 161:./tmk_core/common/action_util.c **** 
 162:./tmk_core/common/action_util.c **** /** \brief Get mods
 163:./tmk_core/common/action_util.c ****  *
 164:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 165:./tmk_core/common/action_util.c ****  */
 166:./tmk_core/common/action_util.c **** uint8_t get_mods(void) { return real_mods; }
 167:./tmk_core/common/action_util.c **** /** \brief add mods
 168:./tmk_core/common/action_util.c ****  *
 169:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 170:./tmk_core/common/action_util.c ****  */
 171:./tmk_core/common/action_util.c **** void add_mods(uint8_t mods) { real_mods |= mods; }
 172:./tmk_core/common/action_util.c **** /** \brief del mods
 173:./tmk_core/common/action_util.c ****  *
 174:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 175:./tmk_core/common/action_util.c ****  */
 176:./tmk_core/common/action_util.c **** void del_mods(uint8_t mods) { real_mods &= ~mods; }
 177:./tmk_core/common/action_util.c **** /** \brief set mods
 178:./tmk_core/common/action_util.c ****  *
 179:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 180:./tmk_core/common/action_util.c ****  */
 181:./tmk_core/common/action_util.c **** void set_mods(uint8_t mods) { real_mods = mods; }
 182:./tmk_core/common/action_util.c **** /** \brief clear mods
 183:./tmk_core/common/action_util.c ****  *
 184:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 185:./tmk_core/common/action_util.c ****  */
 186:./tmk_core/common/action_util.c **** void clear_mods(void) { real_mods = 0; }
 187:./tmk_core/common/action_util.c **** 
 188:./tmk_core/common/action_util.c **** /** \brief get weak mods
 189:./tmk_core/common/action_util.c ****  *
 190:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 191:./tmk_core/common/action_util.c ****  */
 192:./tmk_core/common/action_util.c **** uint8_t get_weak_mods(void) { return weak_mods; }
 193:./tmk_core/common/action_util.c **** /** \brief add weak mods
 194:./tmk_core/common/action_util.c ****  *
 195:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 196:./tmk_core/common/action_util.c ****  */
 197:./tmk_core/common/action_util.c **** void add_weak_mods(uint8_t mods) { weak_mods |= mods; }
 198:./tmk_core/common/action_util.c **** /** \brief del weak mods
 199:./tmk_core/common/action_util.c ****  *
 200:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 201:./tmk_core/common/action_util.c ****  */
 202:./tmk_core/common/action_util.c **** void del_weak_mods(uint8_t mods) { weak_mods &= ~mods; }
 203:./tmk_core/common/action_util.c **** /** \brief set weak mods
 204:./tmk_core/common/action_util.c ****  *
 205:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 206:./tmk_core/common/action_util.c ****  */
 207:./tmk_core/common/action_util.c **** void set_weak_mods(uint8_t mods) { weak_mods = mods; }
 208:./tmk_core/common/action_util.c **** /** \brief clear weak mods
 209:./tmk_core/common/action_util.c ****  *
 210:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 211:./tmk_core/common/action_util.c ****  */
 212:./tmk_core/common/action_util.c **** void clear_weak_mods(void) { weak_mods = 0; }
 213:./tmk_core/common/action_util.c **** 
 214:./tmk_core/common/action_util.c **** /* macro modifier */
 215:./tmk_core/common/action_util.c **** /** \brief get macro mods
 216:./tmk_core/common/action_util.c ****  *
 217:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 218:./tmk_core/common/action_util.c ****  */
 219:./tmk_core/common/action_util.c **** uint8_t get_macro_mods(void) { return macro_mods; }
 220:./tmk_core/common/action_util.c **** /** \brief add macro mods
 221:./tmk_core/common/action_util.c ****  *
 222:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 223:./tmk_core/common/action_util.c ****  */
 224:./tmk_core/common/action_util.c **** void add_macro_mods(uint8_t mods) { macro_mods |= mods; }
 225:./tmk_core/common/action_util.c **** /** \brief del macro mods
 226:./tmk_core/common/action_util.c ****  *
 227:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 228:./tmk_core/common/action_util.c ****  */
 229:./tmk_core/common/action_util.c **** void del_macro_mods(uint8_t mods) { macro_mods &= ~mods; }
 230:./tmk_core/common/action_util.c **** /** \brief set macro mods
 231:./tmk_core/common/action_util.c ****  *
 232:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 233:./tmk_core/common/action_util.c ****  */
 234:./tmk_core/common/action_util.c **** void set_macro_mods(uint8_t mods) { macro_mods = mods; }
 235:./tmk_core/common/action_util.c **** /** \brief clear macro mods
 236:./tmk_core/common/action_util.c ****  *
 237:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 238:./tmk_core/common/action_util.c ****  */
 239:./tmk_core/common/action_util.c **** void clear_macro_mods(void) { macro_mods = 0; }
 240:./tmk_core/common/action_util.c **** 
 241:./tmk_core/common/action_util.c **** #ifndef NO_ACTION_ONESHOT
 242:./tmk_core/common/action_util.c **** /** \brief set oneshot mods
 243:./tmk_core/common/action_util.c ****  *
 244:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 245:./tmk_core/common/action_util.c ****  */
 246:./tmk_core/common/action_util.c **** void set_oneshot_mods(uint8_t mods)
 247:./tmk_core/common/action_util.c **** {
 248:./tmk_core/common/action_util.c ****     oneshot_mods = mods;
 249:./tmk_core/common/action_util.c **** #if (defined(ONESHOT_TIMEOUT) && (ONESHOT_TIMEOUT > 0))
 250:./tmk_core/common/action_util.c ****     oneshot_time = timer_read();
 251:./tmk_core/common/action_util.c **** #endif
 252:./tmk_core/common/action_util.c **** }
 253:./tmk_core/common/action_util.c **** /** \brief clear oneshot mods
 254:./tmk_core/common/action_util.c ****  *
 255:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 256:./tmk_core/common/action_util.c ****  */
 257:./tmk_core/common/action_util.c **** void clear_oneshot_mods(void)
 258:./tmk_core/common/action_util.c **** {
 259:./tmk_core/common/action_util.c ****     oneshot_mods = 0;
 340               		.loc 2 259 0
 341 0056 1092 0000 		sts oneshot_mods,__zero_reg__
 342               	.L19:
 343               	.LBE11:
 344               	.LBE10:
 159:./tmk_core/common/action_util.c **** }
 345               		.loc 2 159 0
 346 005a 8091 0000 		lds r24,keyboard_report
 347 005e 9091 0000 		lds r25,keyboard_report+1
 348 0062 0C94 0000 		jmp host_keyboard_send
 349               	.LVL16:
 350               		.cfi_endproc
 351               	.LFE17:
 353               		.section	.text.get_mods,"ax",@progbits
 354               	.global	get_mods
 356               	get_mods:
 357               	.LFB18:
 166:./tmk_core/common/action_util.c **** /** \brief add mods
 358               		.loc 2 166 0
 359               		.cfi_startproc
 360               	/* prologue: function */
 361               	/* frame size = 0 */
 362               	/* stack size = 0 */
 363               	.L__stack_usage = 0
 166:./tmk_core/common/action_util.c **** /** \brief add mods
 364               		.loc 2 166 0
 365 0000 8091 0000 		lds r24,real_mods
 366 0004 0895      		ret
 367               		.cfi_endproc
 368               	.LFE18:
 370               		.section	.text.add_mods,"ax",@progbits
 371               	.global	add_mods
 373               	add_mods:
 374               	.LFB19:
 171:./tmk_core/common/action_util.c **** /** \brief del mods
 375               		.loc 2 171 0
 376               		.cfi_startproc
 377               	.LVL17:
 378               	/* prologue: function */
 379               	/* frame size = 0 */
 380               	/* stack size = 0 */
 381               	.L__stack_usage = 0
 171:./tmk_core/common/action_util.c **** /** \brief del mods
 382               		.loc 2 171 0
 383 0000 9091 0000 		lds r25,real_mods
 384 0004 892B      		or r24,r25
 385               	.LVL18:
 386 0006 8093 0000 		sts real_mods,r24
 387 000a 0895      		ret
 388               		.cfi_endproc
 389               	.LFE19:
 391               		.section	.text.del_mods,"ax",@progbits
 392               	.global	del_mods
 394               	del_mods:
 395               	.LFB20:
 176:./tmk_core/common/action_util.c **** /** \brief set mods
 396               		.loc 2 176 0
 397               		.cfi_startproc
 398               	.LVL19:
 399               	/* prologue: function */
 400               	/* frame size = 0 */
 401               	/* stack size = 0 */
 402               	.L__stack_usage = 0
 176:./tmk_core/common/action_util.c **** /** \brief set mods
 403               		.loc 2 176 0
 404 0000 8095      		com r24
 405               	.LVL20:
 406 0002 9091 0000 		lds r25,real_mods
 407 0006 8923      		and r24,r25
 408               	.LVL21:
 409 0008 8093 0000 		sts real_mods,r24
 410 000c 0895      		ret
 411               		.cfi_endproc
 412               	.LFE20:
 414               		.section	.text.set_mods,"ax",@progbits
 415               	.global	set_mods
 417               	set_mods:
 418               	.LFB21:
 181:./tmk_core/common/action_util.c **** /** \brief clear mods
 419               		.loc 2 181 0
 420               		.cfi_startproc
 421               	.LVL22:
 422               	/* prologue: function */
 423               	/* frame size = 0 */
 424               	/* stack size = 0 */
 425               	.L__stack_usage = 0
 181:./tmk_core/common/action_util.c **** /** \brief clear mods
 426               		.loc 2 181 0
 427 0000 8093 0000 		sts real_mods,r24
 428 0004 0895      		ret
 429               		.cfi_endproc
 430               	.LFE21:
 432               		.section	.text.clear_mods,"ax",@progbits
 433               	.global	clear_mods
 435               	clear_mods:
 436               	.LFB22:
 186:./tmk_core/common/action_util.c **** 
 437               		.loc 2 186 0
 438               		.cfi_startproc
 439               	/* prologue: function */
 440               	/* frame size = 0 */
 441               	/* stack size = 0 */
 442               	.L__stack_usage = 0
 186:./tmk_core/common/action_util.c **** 
 443               		.loc 2 186 0
 444 0000 1092 0000 		sts real_mods,__zero_reg__
 445 0004 0895      		ret
 446               		.cfi_endproc
 447               	.LFE22:
 449               		.section	.text.get_weak_mods,"ax",@progbits
 450               	.global	get_weak_mods
 452               	get_weak_mods:
 453               	.LFB23:
 192:./tmk_core/common/action_util.c **** /** \brief add weak mods
 454               		.loc 2 192 0
 455               		.cfi_startproc
 456               	/* prologue: function */
 457               	/* frame size = 0 */
 458               	/* stack size = 0 */
 459               	.L__stack_usage = 0
 192:./tmk_core/common/action_util.c **** /** \brief add weak mods
 460               		.loc 2 192 0
 461 0000 8091 0000 		lds r24,weak_mods
 462 0004 0895      		ret
 463               		.cfi_endproc
 464               	.LFE23:
 466               		.section	.text.add_weak_mods,"ax",@progbits
 467               	.global	add_weak_mods
 469               	add_weak_mods:
 470               	.LFB24:
 197:./tmk_core/common/action_util.c **** /** \brief del weak mods
 471               		.loc 2 197 0
 472               		.cfi_startproc
 473               	.LVL23:
 474               	/* prologue: function */
 475               	/* frame size = 0 */
 476               	/* stack size = 0 */
 477               	.L__stack_usage = 0
 197:./tmk_core/common/action_util.c **** /** \brief del weak mods
 478               		.loc 2 197 0
 479 0000 9091 0000 		lds r25,weak_mods
 480 0004 892B      		or r24,r25
 481               	.LVL24:
 482 0006 8093 0000 		sts weak_mods,r24
 483 000a 0895      		ret
 484               		.cfi_endproc
 485               	.LFE24:
 487               		.section	.text.del_weak_mods,"ax",@progbits
 488               	.global	del_weak_mods
 490               	del_weak_mods:
 491               	.LFB25:
 202:./tmk_core/common/action_util.c **** /** \brief set weak mods
 492               		.loc 2 202 0
 493               		.cfi_startproc
 494               	.LVL25:
 495               	/* prologue: function */
 496               	/* frame size = 0 */
 497               	/* stack size = 0 */
 498               	.L__stack_usage = 0
 202:./tmk_core/common/action_util.c **** /** \brief set weak mods
 499               		.loc 2 202 0
 500 0000 8095      		com r24
 501               	.LVL26:
 502 0002 9091 0000 		lds r25,weak_mods
 503 0006 8923      		and r24,r25
 504               	.LVL27:
 505 0008 8093 0000 		sts weak_mods,r24
 506 000c 0895      		ret
 507               		.cfi_endproc
 508               	.LFE25:
 510               		.section	.text.set_weak_mods,"ax",@progbits
 511               	.global	set_weak_mods
 513               	set_weak_mods:
 514               	.LFB26:
 207:./tmk_core/common/action_util.c **** /** \brief clear weak mods
 515               		.loc 2 207 0
 516               		.cfi_startproc
 517               	.LVL28:
 518               	/* prologue: function */
 519               	/* frame size = 0 */
 520               	/* stack size = 0 */
 521               	.L__stack_usage = 0
 207:./tmk_core/common/action_util.c **** /** \brief clear weak mods
 522               		.loc 2 207 0
 523 0000 8093 0000 		sts weak_mods,r24
 524 0004 0895      		ret
 525               		.cfi_endproc
 526               	.LFE26:
 528               		.section	.text.clear_weak_mods,"ax",@progbits
 529               	.global	clear_weak_mods
 531               	clear_weak_mods:
 532               	.LFB27:
 212:./tmk_core/common/action_util.c **** 
 533               		.loc 2 212 0
 534               		.cfi_startproc
 535               	/* prologue: function */
 536               	/* frame size = 0 */
 537               	/* stack size = 0 */
 538               	.L__stack_usage = 0
 212:./tmk_core/common/action_util.c **** 
 539               		.loc 2 212 0
 540 0000 1092 0000 		sts weak_mods,__zero_reg__
 541 0004 0895      		ret
 542               		.cfi_endproc
 543               	.LFE27:
 545               		.section	.text.get_macro_mods,"ax",@progbits
 546               	.global	get_macro_mods
 548               	get_macro_mods:
 549               	.LFB28:
 219:./tmk_core/common/action_util.c **** /** \brief add macro mods
 550               		.loc 2 219 0
 551               		.cfi_startproc
 552               	/* prologue: function */
 553               	/* frame size = 0 */
 554               	/* stack size = 0 */
 555               	.L__stack_usage = 0
 219:./tmk_core/common/action_util.c **** /** \brief add macro mods
 556               		.loc 2 219 0
 557 0000 8091 0000 		lds r24,macro_mods
 558 0004 0895      		ret
 559               		.cfi_endproc
 560               	.LFE28:
 562               		.section	.text.add_macro_mods,"ax",@progbits
 563               	.global	add_macro_mods
 565               	add_macro_mods:
 566               	.LFB29:
 224:./tmk_core/common/action_util.c **** /** \brief del macro mods
 567               		.loc 2 224 0
 568               		.cfi_startproc
 569               	.LVL29:
 570               	/* prologue: function */
 571               	/* frame size = 0 */
 572               	/* stack size = 0 */
 573               	.L__stack_usage = 0
 224:./tmk_core/common/action_util.c **** /** \brief del macro mods
 574               		.loc 2 224 0
 575 0000 9091 0000 		lds r25,macro_mods
 576 0004 892B      		or r24,r25
 577               	.LVL30:
 578 0006 8093 0000 		sts macro_mods,r24
 579 000a 0895      		ret
 580               		.cfi_endproc
 581               	.LFE29:
 583               		.section	.text.del_macro_mods,"ax",@progbits
 584               	.global	del_macro_mods
 586               	del_macro_mods:
 587               	.LFB30:
 229:./tmk_core/common/action_util.c **** /** \brief set macro mods
 588               		.loc 2 229 0
 589               		.cfi_startproc
 590               	.LVL31:
 591               	/* prologue: function */
 592               	/* frame size = 0 */
 593               	/* stack size = 0 */
 594               	.L__stack_usage = 0
 229:./tmk_core/common/action_util.c **** /** \brief set macro mods
 595               		.loc 2 229 0
 596 0000 8095      		com r24
 597               	.LVL32:
 598 0002 9091 0000 		lds r25,macro_mods
 599 0006 8923      		and r24,r25
 600               	.LVL33:
 601 0008 8093 0000 		sts macro_mods,r24
 602 000c 0895      		ret
 603               		.cfi_endproc
 604               	.LFE30:
 606               		.section	.text.set_macro_mods,"ax",@progbits
 607               	.global	set_macro_mods
 609               	set_macro_mods:
 610               	.LFB31:
 234:./tmk_core/common/action_util.c **** /** \brief clear macro mods
 611               		.loc 2 234 0
 612               		.cfi_startproc
 613               	.LVL34:
 614               	/* prologue: function */
 615               	/* frame size = 0 */
 616               	/* stack size = 0 */
 617               	.L__stack_usage = 0
 234:./tmk_core/common/action_util.c **** /** \brief clear macro mods
 618               		.loc 2 234 0
 619 0000 8093 0000 		sts macro_mods,r24
 620 0004 0895      		ret
 621               		.cfi_endproc
 622               	.LFE31:
 624               		.section	.text.clear_macro_mods,"ax",@progbits
 625               	.global	clear_macro_mods
 627               	clear_macro_mods:
 628               	.LFB32:
 239:./tmk_core/common/action_util.c **** 
 629               		.loc 2 239 0
 630               		.cfi_startproc
 631               	/* prologue: function */
 632               	/* frame size = 0 */
 633               	/* stack size = 0 */
 634               	.L__stack_usage = 0
 239:./tmk_core/common/action_util.c **** 
 635               		.loc 2 239 0
 636 0000 1092 0000 		sts macro_mods,__zero_reg__
 637 0004 0895      		ret
 638               		.cfi_endproc
 639               	.LFE32:
 641               		.section	.text.set_oneshot_mods,"ax",@progbits
 642               	.global	set_oneshot_mods
 644               	set_oneshot_mods:
 645               	.LFB33:
 247:./tmk_core/common/action_util.c ****     oneshot_mods = mods;
 646               		.loc 2 247 0
 647               		.cfi_startproc
 648               	.LVL35:
 649               	/* prologue: function */
 650               	/* frame size = 0 */
 651               	/* stack size = 0 */
 652               	.L__stack_usage = 0
 248:./tmk_core/common/action_util.c **** #if (defined(ONESHOT_TIMEOUT) && (ONESHOT_TIMEOUT > 0))
 653               		.loc 2 248 0
 654 0000 8093 0000 		sts oneshot_mods,r24
 655 0004 0895      		ret
 656               		.cfi_endproc
 657               	.LFE33:
 659               		.section	.text.clear_oneshot_mods,"ax",@progbits
 660               	.global	clear_oneshot_mods
 662               	clear_oneshot_mods:
 663               	.LFB34:
 258:./tmk_core/common/action_util.c ****     oneshot_mods = 0;
 664               		.loc 2 258 0
 665               		.cfi_startproc
 666               	/* prologue: function */
 667               	/* frame size = 0 */
 668               	/* stack size = 0 */
 669               	.L__stack_usage = 0
 670               		.loc 2 259 0
 671 0000 1092 0000 		sts oneshot_mods,__zero_reg__
 672 0004 0895      		ret
 673               		.cfi_endproc
 674               	.LFE34:
 676               		.section	.text.get_oneshot_mods,"ax",@progbits
 677               	.global	get_oneshot_mods
 679               	get_oneshot_mods:
 680               	.LFB35:
 260:./tmk_core/common/action_util.c **** #if (defined(ONESHOT_TIMEOUT) && (ONESHOT_TIMEOUT > 0))
 261:./tmk_core/common/action_util.c ****     oneshot_time = 0;
 262:./tmk_core/common/action_util.c **** #endif
 263:./tmk_core/common/action_util.c **** }
 264:./tmk_core/common/action_util.c **** /** \brief get oneshot mods
 265:./tmk_core/common/action_util.c ****  *
 266:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 267:./tmk_core/common/action_util.c ****  */
 268:./tmk_core/common/action_util.c **** uint8_t get_oneshot_mods(void)
 269:./tmk_core/common/action_util.c **** {
 681               		.loc 2 269 0
 682               		.cfi_startproc
 683               	/* prologue: function */
 684               	/* frame size = 0 */
 685               	/* stack size = 0 */
 686               	.L__stack_usage = 0
 270:./tmk_core/common/action_util.c ****     return oneshot_mods;
 271:./tmk_core/common/action_util.c **** }
 687               		.loc 2 271 0
 688 0000 8091 0000 		lds r24,oneshot_mods
 689 0004 0895      		ret
 690               		.cfi_endproc
 691               	.LFE35:
 693               		.section	.text.has_anymod,"ax",@progbits
 694               	.global	has_anymod
 696               	has_anymod:
 697               	.LFB36:
 272:./tmk_core/common/action_util.c **** #endif
 273:./tmk_core/common/action_util.c **** 
 274:./tmk_core/common/action_util.c **** /** \brief inspect keyboard state
 275:./tmk_core/common/action_util.c ****  *
 276:./tmk_core/common/action_util.c ****  * FIXME: needs doc
 277:./tmk_core/common/action_util.c ****  */
 278:./tmk_core/common/action_util.c **** uint8_t has_anymod(void)
 279:./tmk_core/common/action_util.c **** {
 698               		.loc 2 279 0
 699               		.cfi_startproc
 700               	/* prologue: function */
 701               	/* frame size = 0 */
 702               	/* stack size = 0 */
 703               	.L__stack_usage = 0
 280:./tmk_core/common/action_util.c ****     return bitpop(real_mods);
 704               		.loc 2 280 0
 705 0000 8091 0000 		lds r24,real_mods
 706 0004 0C94 0000 		jmp bitpop
 707               	.LVL36:
 708               		.cfi_endproc
 709               	.LFE36:
 711               		.section	.bss.oneshot_layer_data,"aw",@nobits
 714               	oneshot_layer_data:
 715 0000 00        		.zero	1
 716               		.section	.bss.oneshot_locked_mods,"aw",@nobits
 719               	oneshot_locked_mods:
 720 0000 00        		.zero	1
 721               		.section	.bss.oneshot_mods,"aw",@nobits
 724               	oneshot_mods:
 725 0000 00        		.zero	1
 726               	.global	keyboard_report
 727               		.section	.data.keyboard_report,"aw",@progbits
 730               	keyboard_report:
 731 0000 0000      		.word	__compound_literal.0
 732               		.section	.bss.__compound_literal.0,"aw",@nobits
 735               	__compound_literal.0:
 736 0000 0000 0000 		.zero	8
 736      0000 0000 
 737               		.section	.bss.macro_mods,"aw",@nobits
 740               	macro_mods:
 741 0000 00        		.zero	1
 742               		.section	.bss.weak_mods,"aw",@nobits
 745               	weak_mods:
 746 0000 00        		.zero	1
 747               		.section	.bss.real_mods,"aw",@nobits
 750               	real_mods:
 751 0000 00        		.zero	1
 752               		.text
 753               	.Letext0:
 754               		.file 3 "/usr/lib/avr/include/stdint.h"
 755               		.file 4 "./tmk_core/common/report.h"
 756               		.file 5 "./tmk_core/common/action_layer.h"
 757               		.file 6 "./tmk_core/common/host.h"
 758               		.file 7 "./tmk_core/common/util.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 action_util.c
     /tmp/ccRHgrQD.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccRHgrQD.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccRHgrQD.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccRHgrQD.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccRHgrQD.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccRHgrQD.s:13     .text.add_key:0000000000000000 add_key
     /tmp/ccRHgrQD.s:730    .data.keyboard_report:0000000000000000 keyboard_report
     /tmp/ccRHgrQD.s:36     .text.del_key:0000000000000000 del_key
     /tmp/ccRHgrQD.s:58     .text.clear_keys:0000000000000000 clear_keys
     /tmp/ccRHgrQD.s:77     .text.get_oneshot_locked_mods:0000000000000000 get_oneshot_locked_mods
     /tmp/ccRHgrQD.s:719    .bss.oneshot_locked_mods:0000000000000000 oneshot_locked_mods
     /tmp/ccRHgrQD.s:95     .text.set_oneshot_locked_mods:0000000000000000 set_oneshot_locked_mods
     /tmp/ccRHgrQD.s:113    .text.clear_oneshot_locked_mods:0000000000000000 clear_oneshot_locked_mods
     /tmp/ccRHgrQD.s:130    .text.has_oneshot_mods_timed_out:0000000000000000 has_oneshot_mods_timed_out
     /tmp/ccRHgrQD.s:147    .text.get_oneshot_layer:0000000000000000 get_oneshot_layer
     /tmp/ccRHgrQD.s:714    .bss.oneshot_layer_data:0000000000000000 oneshot_layer_data
     /tmp/ccRHgrQD.s:167    .text.get_oneshot_layer_state:0000000000000000 get_oneshot_layer_state
     /tmp/ccRHgrQD.s:185    .text.set_oneshot_layer:0000000000000000 set_oneshot_layer
     /tmp/ccRHgrQD.s:210    .text.reset_oneshot_layer:0000000000000000 reset_oneshot_layer
     /tmp/ccRHgrQD.s:227    .text.clear_oneshot_layer_state:0000000000000000 clear_oneshot_layer_state
     /tmp/ccRHgrQD.s:272    .text.is_oneshot_layer_active:0000000000000000 is_oneshot_layer_active
     /tmp/ccRHgrQD.s:295    .text.send_keyboard_report:0000000000000000 send_keyboard_report
     /tmp/ccRHgrQD.s:750    .bss.real_mods:0000000000000000 real_mods
     /tmp/ccRHgrQD.s:745    .bss.weak_mods:0000000000000000 weak_mods
     /tmp/ccRHgrQD.s:740    .bss.macro_mods:0000000000000000 macro_mods
     /tmp/ccRHgrQD.s:724    .bss.oneshot_mods:0000000000000000 oneshot_mods
     /tmp/ccRHgrQD.s:356    .text.get_mods:0000000000000000 get_mods
     /tmp/ccRHgrQD.s:373    .text.add_mods:0000000000000000 add_mods
     /tmp/ccRHgrQD.s:394    .text.del_mods:0000000000000000 del_mods
     /tmp/ccRHgrQD.s:417    .text.set_mods:0000000000000000 set_mods
     /tmp/ccRHgrQD.s:435    .text.clear_mods:0000000000000000 clear_mods
     /tmp/ccRHgrQD.s:452    .text.get_weak_mods:0000000000000000 get_weak_mods
     /tmp/ccRHgrQD.s:469    .text.add_weak_mods:0000000000000000 add_weak_mods
     /tmp/ccRHgrQD.s:490    .text.del_weak_mods:0000000000000000 del_weak_mods
     /tmp/ccRHgrQD.s:513    .text.set_weak_mods:0000000000000000 set_weak_mods
     /tmp/ccRHgrQD.s:531    .text.clear_weak_mods:0000000000000000 clear_weak_mods
     /tmp/ccRHgrQD.s:548    .text.get_macro_mods:0000000000000000 get_macro_mods
     /tmp/ccRHgrQD.s:565    .text.add_macro_mods:0000000000000000 add_macro_mods
     /tmp/ccRHgrQD.s:586    .text.del_macro_mods:0000000000000000 del_macro_mods
     /tmp/ccRHgrQD.s:609    .text.set_macro_mods:0000000000000000 set_macro_mods
     /tmp/ccRHgrQD.s:627    .text.clear_macro_mods:0000000000000000 clear_macro_mods
     /tmp/ccRHgrQD.s:644    .text.set_oneshot_mods:0000000000000000 set_oneshot_mods
     /tmp/ccRHgrQD.s:662    .text.clear_oneshot_mods:0000000000000000 clear_oneshot_mods
     /tmp/ccRHgrQD.s:679    .text.get_oneshot_mods:0000000000000000 get_oneshot_mods
     /tmp/ccRHgrQD.s:696    .text.has_anymod:0000000000000000 has_anymod
     /tmp/ccRHgrQD.s:735    .bss.__compound_literal.0:0000000000000000 __compound_literal.0

UNDEFINED SYMBOLS
add_key_to_report
del_key_from_report
clear_keys_from_report
layer_on
layer_off
has_anykey
host_keyboard_send
bitpop
__do_copy_data
__do_clear_bss
